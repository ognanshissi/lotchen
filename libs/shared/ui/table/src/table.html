<!--table caption-->
<div class="p-4 flex justify-between">
  <div>
    <tas-title>{{ title() }}</tas-title>
    <tas-text class="text-sm text-gray-400"
      >{{ data()?.length || 0 }} territoire(s)</tas-text
    >
  </div>
  <div class="flex space-x-2 items-center justify-center">
    <div>
      <tas-form-field class="w-[500px]">
        <tas-label class="sr-only">Recherche</tas-label>
        <input
          type="search"
          tasInput
          size="small"
          placeholder="Rechercher un territoire..."
        />
      </tas-form-field>
    </div>

    <button tas-button iconButton>
      <tas-icon iconName="refresh" class="text-gray-500"></tas-icon>
    </button>

    <button tas-button iconButton color="primary">
      <tas-icon iconName="feather:filter" class="text-gray-500"></tas-icon>
    </button>
  </div>
</div>
<div class="overflow-x-hidden">
  <div class="w-full overflow-x-auto">
    <table class="w-full">
      <ng-container *ngIf="header">
        <thead>
          <ng-container
            *ngTemplateOutlet="header; context: {$implicit: columns()}"
          ></ng-container>
        </thead>
      </ng-container>

      <ng-container *ngIf="body">
        <tbody class="divide-y divide-gray-200">
          @for (item of data(); track item[identifierField()]) {
          <ng-container
            *ngTemplateOutlet="body; context: { $implicit: item }"
          ></ng-container>
          }
        </tbody>
      </ng-container>
    </table>
  </div>

  @if (isLoading()) {
  <div class="p-4 flex justify-center items-center">
    <tas-spinner></tas-spinner>
  </div>
  }

  <div
    class="text-center p-4 text-gray-500"
    *ngIf="!isLoading() && !data().length"
  >
    Aucun élement trouvé
  </div>
</div>
